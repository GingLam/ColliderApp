runApp()
runApp()
runApp()
runApp()
shiny::runApp()
install.packages(c("htmlwidgets", "httpuv", "packrat", "readxl"))
shiny::runApp()
runApp()
runApp()
runApp()
library(shiny)
runApp()
runApp()
runApp()
install.packages(c("httpuv", "readxl"))
library(shiny)
library(shinythemes)
library(ggplot2)
library(dplyr)
library(readr) # For "write_csv" function
library(visreg) # Model visualization
generateData <- function(alpha1, alpha2, n){
sodium  <- rnorm(n, 3.50, 0.50)
age <- sodium * 18 + rnorm(n)
sbp <- 2.25 * sodium + 2.00 * age + rnorm(n)
proteinuria  <-  alpha1 * sodium + alpha2 * sbp + 0.9 * age + rnorm(n)
data.frame(sbp, age, sodium, proteinuria)
}
runApp()
runApp()
runApp()
set.seed(777)
generateData(input$beta1, input$beta2, n = 1000)
set.seed(777)
generateData(0.5, 0.5, n = 1000)
set.seed(777)
generateData(0.5, 0.5, n = 1000) %>% head()
runApp()
ObsData <- generateData(0.5,0.5,1000)
fit1 <- lm(sbp ~ sodium, data = ObsData)
fit1
visreg(fit1, points = list(cex = 1.5, pch = 1), jitter = 10, bty = "n")
withMathJax(sprintf("$$ \\beta_{1} = %.03f$$", fit1$coefficients["sodium"])
runApp()
withMathJax(sprintf("$$ \\beta_{1} = %.03f$$", fit1$coefficients["sodium"])
)
withMathJax(sprintf("$$ \\beta_{1} = %.03f$$", fit1$coefficients["sodium"]))
runApp()
2+2
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library(ggplot2)
#devtools::install_github("malcolmbarrett/ggdag")
library(ggdag)
library(dplyr)
tidy_ggdag <- dagify(A ~ W,
Y ~ W,
Y ~ A) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha<-tidy_ggdag$data[i, ]
if(flecha$name=="W"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name=="Y"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name=="A"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to=="W"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to=="Y"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to=="A"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
tidy_ggdag <- dagify(W ~ A,
Y ~ W,
Y ~ A) %>% tidy_dagitty()
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
library(ggplot2)
#devtools::install_github("malcolmbarrett/ggdag")
library(ggdag)
library(dplyr)
########################################################################
#                           figura 1a
########################################################################
tidy_ggdag <- dagify(A ~ W,
Y ~ W,
Y ~ A) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha<-tidy_ggdag$data[i, ]
if(flecha$name=="W"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name=="Y"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name=="A"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to=="W"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to=="Y"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to=="A"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
g1a
png(g1a, "g1a.png")
png("g1a.png")
g1a
dev.off()
svg("g1a.svg")
dev.off()
g1a
svg("g1a.svg")
g1a
dev.off()
setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
svg("graficoA.svg")
g1a
dev.off()
tidy_ggdag <- dagify(A ~ W,
Y ~ W,
Y ~ A) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha<-tidy_ggdag$data[i, ]
if(flecha$name=="W"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name=="Y"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name=="A"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to=="W"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to=="Y"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to=="A"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
#setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
#svg("graficoA.svg")
g1a
tidy_ggdag <- dagify(A ~ AGE,
Y ~ AGE,
Y ~ A) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha<-tidy_ggdag$data[i, ]
if(flecha$name=="AGE"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name=="Y"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name=="A"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to=="AGE"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to=="Y"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to=="A"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
#setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
#svg("graficoA.svg")
g1a
tidy_ggdag <- dagify(SOD ~ AGE,
SBP ~ AGE,
SBP ~ SOD) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha<-tidy_ggdag$data[i, ]
if(flecha$name=="AGE"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name=="SBP"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name=="SOD"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to=="AGE"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to=="SBP"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to=="SOD"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
#setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
#svg("graficoA.svg")
g1a
setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
svg("graficoA.svg")
g1a
dev.off()
tidy_ggdag <- dagify(W ~ A,
Y ~ W,
Y ~ A) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha <- tidy_ggdag$data[i, ]
if(flecha$name == "W"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name == "Y"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name == "A"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to == "W"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to == "Y"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to == "A"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1b <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1B") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
g1b
tidy_ggdag <- dagify(SBP ~ SOD) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha<-tidy_ggdag$data[i, ]
if(flecha$name=="AGE"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name=="SBP"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name=="SOD"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to=="AGE"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to=="SBP"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to=="SOD"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
g1a
g1a <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
#ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
svg("graficoA.svg")
g1a
dev.off()
tidy_ggdag <- dagify(SOD ~ AGE,
SBP ~ AGE,
SBP ~ SOD) %>% tidy_dagitty()
tidy_ggdag
for(i in 1:dim(tidy_ggdag$data)[[1]]){
flecha<-tidy_ggdag$data[i, ]
if(flecha$name=="AGE"){
tidy_ggdag$data[i, ]$x <- 1
tidy_ggdag$data[i, ]$y <- 2
}
if(flecha$name=="SBP"){
tidy_ggdag$data[i, ]$x <- 2
tidy_ggdag$data[i, ]$y <- 0
}
if(flecha$name=="SOD"){
tidy_ggdag$data[i, ]$x <- 0
tidy_ggdag$data[i, ]$y <- 0
}
}
for(i in 1:dim(tidy_ggdag$data)[[1]]) {
if(is.na(tidy_ggdag$data[i, ]$xend) == TRUE) {primer_na = i
break()}
}
for(i in 1:(primer_na - 1)){
flecha<-tidy_ggdag$data[i, ]
if(flecha$to=="AGE"){
tidy_ggdag$data[i, ]$xend <- 1
tidy_ggdag$data[i, ]$yend <- 2
}
if(flecha$to=="SBP"){
tidy_ggdag$data[i, ]$xend <- 2
tidy_ggdag$data[i, ]$yend <- 0
}
if(flecha$to=="SOD"){
tidy_ggdag$data[i, ]$xend <- 0
tidy_ggdag$data[i, ]$yend <- 0
}
}
g1b <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
svg("graficoB.svg")
g1b
dev.off()
g1b <- ggplot(tidy_ggdag$data, aes(x = x, y = y, xend = xend, yend = yend)) +
geom_dag_edges(aes(),edge_colour = "black") +
geom_dag_node() +
#ggtitle("Figure 1A") +
geom_dag_text(col = "white") +
theme_dag() +
theme(panel.background = element_rect(fill = "transparent", colour = NA),
panel.grid.minor = element_blank(),
panel.grid.major = element_blank())
setwd("C:\\Users\\dredondo\\Dropbox\\COLLIDER\\EpiCollider\\www")
svg("graficoB.svg")
g1b
dev.off()
